<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPi Dashboard</title>
    <link rel="stylesheet" href="/static/style.css?v=4">
    <!-- Font Awesome for Icons (Optional, using text for now if offline) -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> -->
</head>

<body>
    <div class="status-indicator" title="Backend Connection Status"></div>

    <div id="dashboard-view">
        <header>
            <div id="clock-time">00:00</div>
            <div id="clock-date">Mon, Jan 1</div>
            <div id="weather-display">Loading Weather...</div>
            <div id="cpu-temp" style="font-size: 0.9rem; margin-top: 5px; color: var(--accent-color);">--°C</div>
        </header>

        <main>
            <!-- Info Overlay (IP Address) -->
            <div id="ip-overlay">
                <div class="ip-label">SYSTEM IP</div>
                <div id="ip-address">Loading...</div>
            </div>

            <!-- Main Content Box (Message Board) -->
            <div id="main-content-box">
                <div class="box-label">MESSAGE BOARD</div>
                <div id="message-content">Loading...</div>
            </div>
        </main>

        <footer>
            <div class="macro-grid">
                <!-- Row 1 -->
                <button class="macro-btn" data-action="open-chat">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path
                                d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z" />
                        </svg></span> AI CHAT
                </button>
                <button class="macro-btn" data-action="exit-app">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path
                                d="M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5Z" />
                        </svg></span> DESKTOP
                </button>
                <button class="macro-btn" data-action="open-settings">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path
                                d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                        </svg></span> SETTINGS
                </button>

                <!-- Row 2 -->
                <button class="macro-btn" data-action="restart-ui">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path
                                d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
                        </svg></span> REFRESH
                </button>
                <button class="macro-btn btn-danger" data-action="system-shutdown">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path d="M12,2L1,21H23L12,2M12,6L19.53,19H4.47L12,6M11,10V14H13V10H11M11,16V18H13V16H11Z" />
                        </svg></span> POWEROFF
                </button>
                <button class="macro-btn btn-danger" data-action="system-reboot">
                    <span class="icon"><svg viewBox="0 0 24 24">
                            <path
                                d="M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12C4,13.57 4.46,15.03 5.24,16.26L6.7,14.8C6.25,13.97 6,13.03 6,12A6,6 0 0,1 12,6M18.76,7.74L17.3,9.2C17.74,10.04 18,10.97 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12C20,10.43 19.54,8.97 18.76,7.74Z" />
                        </svg></span> REBOOT
                </button>
            </div>
        </footer>
    </div>

    <!-- Agent Chat View -->
    <div id="agent-view" class="hidden">
        <div class="agent-header">
            <button class="btn-small" data-action="close-chat">← Back</button>
            <span class="agent-status">AGENT: IDLE</span>
        </div>
        <div id="chat-history">
            <div class="msg agent-msg">System online. ADK Agent ready.</div>
            <!-- Messages go here -->
        </div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Type command...">
            <button id="send-btn">SEND</button>
        </div>
    </div>

    <!-- Settings View -->
    <div id="settings-view" class="hidden">
        <div class="settings-header">
            <h2>SYSTEM CONFIG</h2>
            <button class="btn-small" data-action="close-settings">CLOSE</button>
        </div>
        <div class="settings-body">
            <div class="setting-group">
                <label>Weather City</label>
                <input type="text" id="setting-city" placeholder="e.g. London">
            </div>
            <div class="setting-group">
                <label>Theme Color</label>
                <input type="color" id="setting-color" value="#00f3ff">
            </div>
            <div class="setting-group">
                <label>Brightness</label>
                <input type="range" id="setting-brightness" min="10" max="100" value="100">
            </div>
            <div class="setting-group">
                <label>Screensaver Timer</label>
                <select id="setting-screensaver"
                    style="background: #222; color: #fff; border: 1px solid var(--card-border); padding: 10px; border-radius: 4px; width: 100%;">
                    <option value="15000">15 Seconds</option>
                    <option value="30000">30 Seconds</option>
                    <option value="45000">45 Seconds</option>
                    <option value="60000">1 Minute</option>
                    <option value="180000">3 Minutes</option>
                    <option value="300000">5 Minutes</option>
                    <option value="600000">10 Minutes</option>
                    <option value="0">Never</option>
                </select>
            </div>
            <div class="setting-group">
                <button class="btn full-width" id="save-settings">SAVE & APPLY</button>
            </div>
        </div>
    </div>

    <!-- Screensaver Overlay -->
    <div id="screensaver-container" class="hidden">
        <video id="screensaver-video" muted playsinline preload="auto"></video>
        <img id="screensaver-image" class="hidden" style="width: 100%; height: 100%; object-fit: cover;">
        <div class="screensaver-overlay">TOUCH TO WAKE</div>
    </div>

    <script src="static/script.js?v=7"></script>
</body>

</html>